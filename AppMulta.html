<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Multas - Equipa de Futebol</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #4a6741 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: white;
            color: #2c3e50;
            border-bottom: 3px solid #4a6741;
        }
        
        .tab-content {
            padding: 30px;
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4a6741;
        }
        
        .btn {
            background: linear-gradient(135deg, #4a6741 0%, #2c3e50 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        .btn-small {
            padding: 5px 15px;
            font-size: 0.8rem;
        }
        
        .grid {
            display: grid;
            gap: 20px;
        }
        
        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4a6741;
            margin-bottom: 20px;
        }
        
        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .multa-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #dc3545;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .multa-item.paga {
            border-left-color: #28a745;
            opacity: 0.7;
        }
        
        .multa-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .multa-valor {
            font-weight: bold;
            font-size: 1.2rem;
            color: #dc3545;
        }
        
        .multa-valor.pago {
            color: #28a745;
        }
        
        .multa-data {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        .empty-state {
            color: #6c757d;
            text-align: center;
            padding: 40px 20px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .multa-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚽ Sistema de Multas</h1>
            <p>Gestão de Multas da Equipa de Futebol</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="mostrarTab('registar')">Registar Multa</button>
            <button class="tab" onclick="mostrarTab('atletas')">Gestão Atletas</button>
            <button class="tab" onclick="mostrarTab('regras')">Regras de Multa</button>
            <button class="tab" onclick="mostrarTab('consultar')">Consultar Multas</button>
        </div>
        
        <!-- Tab: Registar Multa -->
        <div id="registar" class="tab-content active">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalMultas">0</div>
                    <div>Total de Multas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalValor">0€</div>
                    <div>Valor Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="valorPendente">0€</div>
                    <div>Por Pagar</div>
                </div>
            </div>
            
            <div class="card">
                <h3>Nova Multa</h3>
                <div id="alertaRegistar" class="alert" style="display: none;">
                    Para registar multas, primeiro adicione atletas e regras de multa nos outros separadores.
                </div>
                <form id="formMulta" onsubmit="registarMulta(event)">
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label>Atleta *</label>
                            <select id="atletaSelect" required>
                                <option value="">Selecionar atleta...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Regra Infringida *</label>
                            <select id="regraSelect" required>
                                <option value="">Selecionar regra...</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Data da Infração *</label>
                        <input type="date" id="dataMulta" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Observações (opcional)</label>
                        <textarea id="observacoes" rows="3" placeholder="Detalhes adicionais sobre a multa..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn">Registar Multa</button>
                </form>
            </div>
        </div>
        
        <!-- Tab: Gestão Atletas -->
        <div id="atletas" class="tab-content">
            <div class="card">
                <h3>Adicionar Atleta</h3>
                <form id="formAtleta" onsubmit="adicionarAtleta(event)">
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label>Nome *</label>
                            <input type="text" id="nomeAtleta" required placeholder="Nome completo do atleta">
                        </div>
                        <div class="form-group">
                            <label>Número da Camisola</label>
                            <input type="number" id="numeroAtleta" min="1" max="99" placeholder="Ex: 10">
                        </div>
                    </div>
                    <button type="submit" class="btn">Adicionar Atleta</button>
                </form>
            </div>
            
            <div class="card">
                <h3>Atletas Registados (<span id="contadorAtletas">0</span>)</h3>
                <div id="listaAtletas">
                    <div class="empty-state">Nenhum atleta registado ainda.</div>
                </div>
            </div>
        </div>
        
        <!-- Tab: Regras de Multa -->
        <div id="regras" class="tab-content">
            <div class="card">
                <h3>Nova Regra de Multa</h3>
                <form id="formRegra" onsubmit="adicionarRegra(event)">
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label>Descrição da Regra *</label>
                            <input type="text" id="descricaoRegra" required placeholder="Ex: Atraso ao treino">
                        </div>
                        <div class="form-group">
                            <label>Valor da Multa (€) *</label>
                            <input type="number" id="valorRegra" min="0" step="0.50" required placeholder="Ex: 5.00">
                        </div>
                    </div>
                    <button type="submit" class="btn">Adicionar Regra</button>
                </form>
            </div>
            
            <div class="card">
                <h3>Regras Ativas (<span id="contadorRegras">0</span>)</h3>
                <div id="listaRegras">
                    <div class="empty-state">Nenhuma regra de multa definida ainda.</div>
                </div>
            </div>
        </div>
        
        <!-- Tab: Consultar Multas -->
        <div id="consultar" class="tab-content">
            <div class="card">
                <h3>Filtros</h3>
                <div class="grid grid-2">
                    <div class="form-group">
                        <label>Atleta</label>
                        <select id="filtroAtleta">
                            <option value="">Todos os atletas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Estado</label>
                        <select id="filtroEstado">
                            <option value="">Todas as multas</option>
                            <option value="pendente">Pendentes</option>
                            <option value="paga">Pagas</option>
                        </select>
                    </div>
                </div>
                <button onclick="aplicarFiltros()" class="btn">Aplicar Filtros</button>
                <button onclick="limparFiltros()" class="btn btn-secondary">Limpar Filtros</button>
            </div>
            
            <div class="card">
                <h3>Lista de Multas (<span id="contadorMultas">0</span>)</h3>
                <div id="listaMultas">
                    <div class="empty-state">Nenhuma multa registada ainda.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variáveis globais para armazenar os dados
        let atletas = [];
        let regrasMulta = [];
        let multas = [];
        
        // Função para inicializar a aplicação
        function inicializar() {
            console.log('Inicializando aplicação...');
            
            // Carregar dados de exemplo
            carregarDadosExemplo();
            
            // Definir data de hoje como padrão
            const hoje = new Date();
            document.getElementById('dataMulta').value = hoje.toISOString().split('T')[0];
            
            // Atualizar toda a interface
            atualizarInterface();
            
            console.log('Aplicação inicializada com sucesso!');
        }
        
        function carregarDadosExemplo() {
            // Atletas de exemplo
            atletas = [
                {id: 1, nome: 'João Silva', numero: 10},
                {id: 2, nome: 'Pedro Santos', numero: 7},
                {id: 3, nome: 'Miguel Costa', numero: 9}
            ];
            
            // Regras de exemplo
            regrasMulta = [
                {id: 1, descricao: 'Atraso ao treino', valor: 5.00},
                {id: 2, descricao: 'Faltar ao treino sem justificação', valor: 10.00},
                {id: 3, descricao: 'Não trazer material', valor: 3.00},
                {id: 4, descricao: 'Comportamento inadequado', valor: 15.00}
            ];
            
            // Multas de exemplo
            multas = [
                {
                    id: 1,
                    atletaId: 1,
                    regraId: 1,
                    data: '2024-12-10',
                    observacoes: 'Chegou 15 minutos atrasado',
                    paga: false,
                    dataPagamento: null
                },
                {
                    id: 2,
                    atletaId: 2,
                    regraId: 3,
                    data: '2024-12-08',
                    observacoes: '',
                    paga: true,
                    dataPagamento: '2024-12-12'
                }
            ];
        }
        
        function mostrarTab(nomeTab) {
            console.log('Mudando para tab:', nomeTab);
            
            // Remover classe active de todos os tabs e conteúdos
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Ativar o tab clicado
            event.target.classList.add('active');
            document.getElementById(nomeTab).classList.add('active');
            
            // Atualizar conteúdo específico do tab
            if (nomeTab === 'consultar') {
                atualizarFiltros();
                mostrarMultas();
            } else if (nomeTab === 'registar') {
                verificarRequisitos();
                atualizarEstatisticas();
            }
        }
        
        function verificarRequisitos() {
            const alerta = document.getElementById('alertaRegistar');
            const form = document.getElementById('formMulta');
            
            if (atletas.length === 0 || regrasMulta.length === 0) {
                alerta.style.display = 'block';
                form.style.opacity = '0.5';
                form.style.pointerEvents = 'none';
            } else {
                alerta.style.display = 'none';
                form.style.opacity = '1';
                form.style.pointerEvents = 'auto';
            }
        }
        
        function adicionarAtleta(event) {
            event.preventDefault();
            console.log('Adicionando atleta...');
            
            const nome = document.getElementById('nomeAtleta').value.trim();
            const numero = document.getElementById('numeroAtleta').value;
            
            // Validações
            if (!nome) {
                alert('Por favor, insira o nome do atleta.');
                return;
            }
            
            if (numero && atletas.some(a => a.numero == numero)) {
                alert('Já existe um atleta com esse número de camisola!');
                return;
            }
            
            // Criar novo atleta
            const novoAtleta = {
                id: Date.now(),
                nome: nome,
                numero: numero ? parseInt(numero) : null
            };
            
            atletas.push(novoAtleta);
            console.log('Atleta adicionado:', novoAtleta);
            
            // Limpar formulário
            document.getElementById('formAtleta').reset();
            
            // Atualizar interface
            atualizarInterface();
            
            alert(`Atleta "${nome}" adicionado com sucesso!`);
        }
        
        function adicionarRegra(event) {
            event.preventDefault();
            console.log('Adicionando regra...');
            
            const descricao = document.getElementById('descricaoRegra').value.trim();
            const valor = parseFloat(document.getElementById('valorRegra').value);
            
            // Validações
            if (!descricao) {
                alert('Por favor, insira a descrição da regra.');
                return;
            }
            
            if (isNaN(valor) || valor < 0) {
                alert('Por favor, insira um valor válido para a multa.');
                return;
            }
            
            // Criar nova regra
            const novaRegra = {
                id: Date.now(),
                descricao: descricao,
                valor: valor
            };
            
            regrasMulta.push(novaRegra);
            console.log('Regra adicionada:', novaRegra);
            
            // Limpar formulário
            document.getElementById('formRegra').reset();
            
            // Atualizar interface
            atualizarInterface();
            
            alert(`Regra "${descricao}" adicionada com sucesso!`);
        }
        
        function registarMulta(event) {
            event.preventDefault();
            console.log('Registando multa...');
            
            const atletaId = parseInt(document.getElementById('atletaSelect').value);
            const regraId = parseInt(document.getElementById('regraSelect').value);
            const data = document.getElementById('dataMulta').value;
            const observacoes = document.getElementById('observacoes').value.trim();
            
            // Validações
            if (!atletaId || !regraId || !data) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            // Criar nova multa
            const novaMulta = {
                id: Date.now(),
                atletaId: atletaId,
                regraId: regraId,
                data: data,
                observacoes: observacoes,
                paga: false,
                dataPagamento: null
            };
            
            multas.push(novaMulta);
            console.log('Multa registada:', novaMulta);
            
            // Limpar formulário (exceto data)
            document.getElementById('atletaSelect').value = '';
            document.getElementById('regraSelect').value = '';
            document.getElementById('observacoes').value = '';
            
            // Atualizar estatísticas
            atualizarEstatisticas();
            
            // Mostrar confirmação
            const atleta = atletas.find(a => a.id === atletaId);
            const regra = regrasMulta.find(r => r.id === regraId);
            
            alert(`Multa registada com sucesso!\n\nAtleta: ${atleta.nome}\nRegra: ${regra.descricao}\nValor: ${regra.valor.toFixed(2)}€`);
        }
        
        function atualizarInterface() {
            console.log('Atualizando interface...');
            atualizarSelectAtletas();
            atualizarSelectRegras();
            mostrarAtletas();
            mostrarRegras();
            atualizarEstatisticas();
            verificarRequisitos();
        }
        
        function atualizarSelectAtletas() {
            const selects = ['atletaSelect', 'filtroAtleta'];
            
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                const valorAtual = select.value;
                
                // Limpar opções (manter primeira)
                while (select.children.length > 1) {
                    select.removeChild(select.lastChild);
                }
                
                // Adicionar atletas
                atletas.forEach(atleta => {
                    const option = document.createElement('option');
                    option.value = atleta.id;
                    option.textContent = `${atleta.nome}${atleta.numero ? ' (#' + atleta.numero + ')' : ''}`;
                    select.appendChild(option);
                });
                
                select.value = valorAtual;
            });
        }
        
        function atualizarSelectRegras() {
            const select = document.getElementById('regraSelect');
            const valorAtual = select.value;
            
            // Limpar opções (manter primeira)
            while (select.children.length > 1) {
                select.removeChild(select.lastChild);
            }
            
            // Adicionar regras
            regrasMulta.forEach(regra => {
                const option = document.createElement('option');
                option.value = regra.id;
                option.textContent = `${regra.descricao} - ${regra.valor.toFixed(2)}€`;
                select.appendChild(option);
            });
            
            select.value = valorAtual;
        }
        
        function mostrarAtletas() {
            const container = document.getElementById('listaAtletas');
            const contador = document.getElementById('contadorAtletas');
            
            contador.textContent = atletas.length;
            
            if (atletas.length === 0) {
                container.innerHTML = '<div class="empty-state">Nenhum atleta registado ainda.</div>';
                return;
            }
            
            let html = '';
            atletas.forEach(atleta => {
                const multasAtleta = multas.filter(m => m.atletaId === atleta.id);
                const valorTotal = multasAtleta.reduce((total, multa) => {
                    const regra = regrasMulta.find(r => r.id === multa.regraId);
                    return total + (regra ? regra.valor : 0);
                }, 0);
                const valorPendente = multasAtleta.filter(m => !m.paga).reduce((total, multa) => {
                    const regra = regrasMulta.find(r => r.id === multa.regraId);
                    return total + (regra ? regra.valor : 0);
                }, 0);
                
                html += `
                    <div class="multa-item">
                        <div class="multa-header">
                            <strong>${atleta.nome}${atleta.numero ? ' (#' + atleta.numero + ')' : ''}</strong>
                            <div>
                                <span class="multa-valor">${valorPendente.toFixed(2)}€ pendente</span>
                                <button onclick="removerAtleta(${atleta.id})" class="btn btn-danger btn-small">Remover</button>
                            </div>
                        </div>
                        <div style="color: #6c757d; font-size: 0.9rem;">
                            Total de multas: ${multasAtleta.length} | Valor total: ${valorTotal.toFixed(2)}€
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function mostrarRegras() {
            const container = document.getElementById('listaRegras');
            const contador = document.getElementById('contadorRegras');
            
            contador.textContent = regrasMulta.length;
            
            if (regrasMulta.length === 0) {
                container.innerHTML = '<div class="empty-state">Nenhuma regra de multa definida ainda.</div>';
                return;
            }
            
            let html = '';
            regrasMulta.forEach(regra => {
                const vezesUsada = multas.filter(m => m.regraId === regra.id).length;
                
                html += `
                    <div class="multa-item">
                        <div class="multa-header">
                            <strong>${regra.descricao}</strong>
                            <div>
                                <span class="multa-valor">${regra.valor.toFixed(2)}€</span>
                                <button onclick="removerRegra(${regra.id})" class="btn btn-danger btn-small">Remover</button>
                            </div>
                        </div>
                        <div style="color: #6c757d; font-size: 0.9rem;">
                            Usada ${vezesUsada} vez${vezesUsada !== 1 ? 'es' : ''}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function atualizarEstatisticas() {
            const totalMultas = multas.length;
            const valorTotal = multas.reduce((total, multa) => {
                const regra = regrasMulta.find(r => r.id === multa.regraId);
                return total + (regra ? regra.valor : 0);
            }, 0);
            const valorPendente = multas.filter(m => !m.paga).reduce((total, multa) => {
                const regra = regrasMulta.find(r => r.id === multa.regraId);
                return total + (regra ? regra.valor : 0);
            }, 0);
            
            document.getElementById('totalMultas').textContent = totalMultas;
            document.getElementById('totalValor').textContent = valorTotal.toFixed(2) + '€';
            document.getElementById('valorPendente').textContent = valorPendente.toFixed(2) + '€';
        }
        
        function atualizarFiltros() {
            atualizarSelectAtletas();
        }
        
        function mostrarMultas() {
            const container = document.getElementById('listaMultas');
            const contador = document.getElementById('contadorMultas');
            let multasFiltradas = [...multas];
            
            // Aplicar filtros
            const filtroAtleta = document.getElementById('filtroAtleta').value;
            const filtroEstado = document.getElementById('filtroEstado').value;
            
            if (filtroAtleta) {
                multasFiltradas = multasFiltradas.filter(m => m.atletaId == filtroAtleta);
            }
            
            if (filtroEstado) {
                multasFiltradas = multasFiltradas.filter(m => {
                    return filtroEstado === 'paga' ? m.paga : !m.paga;
                });
            }
            
            // Ordenar por data (mais recente primeiro)
            multasFiltradas.sort((a, b) => new Date(b.data) - new Date(a.data));
            
            contador.textContent = multasFiltradas.length;
            
            if (multasFiltradas.length === 0) {
                container.innerHTML = '<div class="empty-state">Nenhuma multa encontrada.</div>';
                return;
            }
            
            let html = '';
            multasFiltradas.forEach(multa => {
                const atleta = atletas.find(a => a.id === multa.atletaId);
                const regra = regrasMulta.find(r => r.id === multa.regraId);
                
                if (!atleta || !regra) return;
                
                html += `
                    <div class="multa-item ${multa.paga ? 'paga' : ''}">
                        <div class="multa-header">
                            <div>
                                <strong>${atleta.nome}${atleta.numero ? ' (#' + atleta.numero + ')' : ''}</strong>
                                <div style="font-size: 0.9rem; color: #6c757d;">${regra.descricao}</div>
                            </div>
                            <div style="text-align: right;">
                                <div class="multa-valor ${multa.paga ? 'pago' : ''}">${regra.valor.toFixed(2)}€</div>
                                <div class="multa-data">${new Date(multa.data).toLocaleDateString('pt-PT')}</div>
                            </div>
                        </div>
                        ${multa.observacoes ? `<div style="font-style: italic; color: #6c757d; margin-top: 5px;">${multa.observacoes}</div>` : ''}
                        <div style="margin-top: 10px;">
                            ${multa.paga ? 
                                `<span style="color: #28a745; font-weight: bold;">✓ Paga em ${new Date(multa.dataPagamento).toLocaleDateString('pt-PT')}</span>
                                 <button onclick="marcarComoPendente(${multa.id})" class="btn btn-secondary btn-small">Marcar como Pendente</button>` :
                                `<button onclick="marcarComoPaga(${multa.id})" class="btn btn-small">Marcar como Paga</button>`}
                            <button onclick="removerMulta(${multa.id})" class="btn btn-danger btn-small">Remover</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function aplicarFiltros() {
            mostrarMultas();
        }
        
        function limparFiltros() {
            document.getElementById('filtroAtleta').value = '';
            document.getElementById('filtroEstado').value = '';
            mostrarMultas();
        }
        
        function marcarComoPaga(multaId) {
            const multa = multas.find(m => m.id === multaId);
            if (multa) {
                multa.paga = true;
                multa.dataPagamento = new Date().toISOString().split('T')[0];
                mostrarMultas();
                atualizarEstatisticas();
                alert('Multa marcada como paga!');
            }
        }
        
        function marcarComoPendente(multaId) {
            const multa = multas.find(m => m.id === multaId);
            if (multa) {
                multa.paga = false;
                multa.dataPagamento = null;
                mostrarMultas();
                atualizarEstatisticas();
                alert('Multa marcada como pendente!');
            }
        }
        
        function removerMulta(multaId) {
            if (confirm('Tem certeza que deseja remover esta multa?')) {
                const index = multas.findIndex(m => m.id === multaId);
                if (index > -1) {
                    multas.splice(index, 1);
                    mostrarMultas();
                    atualizarEstatisticas();
                    alert('Multa removida com sucesso!');
                }
            }
        }
        
        function removerAtleta(atletaId) {
            const multasAtleta = multas.filter(m => m.atletaId === atletaId);
            if (multasAtleta.length > 0) {
                if (!confirm(`Este atleta tem ${multasAtleta.length} multa(s) registada(s). Remover o atleta irá remover também todas as suas multas. Continuar?`)) {
                    return;
                }
                // Remover todas as multas do atleta
                multas = multas.filter(m => m.atletaId !== atletaId);
            }
            
            const index = atletas.findIndex(a => a.id === atletaId);
            if (index > -1) {
                atletas.splice(index, 1);
                atualizarInterface();
                alert('Atleta removido com sucesso!');
            }
        }
        
        function removerRegra(regraId) {
            const multasRegra = multas.filter(m => m.regraId === regraId);
            if (multasRegra.length > 0) {
                alert(`Não é possível remover esta regra porque existe(m) ${multasRegra.length} multa(s) registada(s) com ela.`);
                return;
            }
            
            if (confirm('Tem certeza que deseja remover esta regra de multa?')) {
                const index = regrasMulta.findIndex(r => r.id === regraId);
                if (index > -1) {
                    regrasMulta.splice(index, 1);
                    atualizarInterface();
                    alert('Regra de multa removida com sucesso!');
                }
            }
        }
        
        // Inicializar quando a página carrega
        window.addEventListener('DOMContentLoaded', inicializar);
        
        // Debug: Adicionar algumas funções globais para teste
        window.debugApp = {
            atletas: () => atletas,
            regras: () => regrasMulta,
            multas: () => multas,
            reset: () => {
                atletas = [];
                regrasMulta = [];
                multas = [];
                atualizarInterface();
            }
        };
    </script>
</html>
</body>